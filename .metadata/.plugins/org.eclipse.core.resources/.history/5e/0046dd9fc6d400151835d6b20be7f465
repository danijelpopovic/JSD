package editor.utils;

import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.text.BadLocationException;

import editor.view.EditorFrame.SuggestionPanel;

public class MyKeyListener implements KeyListener{

	public SuggestionPanel suggestion;
	public JTextPane txtpnEditor;
	
	
	@Override
	public void keyTyped(KeyEvent e) {
		 if (e.getKeyChar() == KeyEvent.VK_ENTER) {
                if (suggestion != null) {
                    if (suggestion.insertSelection()) {
                        e.consume();
                        final int position = txtpnEditor.getCaretPosition();
                        SwingUtilities.invokeLater(new Runnable() {
                            @Override
                            public void run() {
                                try {
                                	txtpnEditor.getDocument().remove(position - 1, 1);
                                } catch (BadLocationException e) {
                                    e.printStackTrace();
                                }
                            }
                        });
                    }
                }
            }				
	}

	@Override
	public void keyPressed(KeyEvent e) {
		
	}

	@Override
	public void keyReleased(KeyEvent e) {
		// TODO Auto-generated method stub
		if (e.getKeyCode() == KeyEvent.VK_DOWN && suggestion != null) {
            suggestion.moveDown();
        } else if (e.getKeyCode() == KeyEvent.VK_UP && suggestion != null) {
            suggestion.moveUp();
        } else if (Character.isLetterOrDigit(e.getKeyChar())) {
            showSuggestionLater();
        } else if (Character.isWhitespace(e.getKeyChar())) {
            hideSuggestion();
        }
	}	            

}
